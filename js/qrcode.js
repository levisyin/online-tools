!function(){function e(e){var o=e.replace("-","_"),n={};return n[o+"_option_type"]=$("#"+e+"-option-type").val(),n[o+"_option_color"]=$("#"+e+"-option-color").val(),n}function o(e,o){return{color:e[o+"_option_color"],type:e[o+"_option_type"]}}function n(e,o){var n=new FileReader;n.onloadend=function(){o(n.result)},n.readAsDataURL(e)}function r(e,o){if(e instanceof File)return n(e,o);ot.getBlob(e,function(e){n(e,o)})}function i(e,n){var r=e.type,i="svg"===r?"svg":"canvas",t=e.image?"H":"Q",a={width:e.size,height:e.size,type:i,data:e.input,image:e.image,imageOptions:{imageSize:e.image_size||.4,margin:e.image_margin||0,hideBackgroundDots:!e.image_show_background},dotsOptions:o(e,"dot"),cornersSquareOptions:o(e,"corners_square"),cornersDotOptions:o(e,"corners_dot"),qrOptions:{errorCorrectionLevel:t},backgroundOptions:{color:e.background_option_color}},c=document.getElementById("qrcode");new QRCodeStyling(a).getRawData(r).then(function(e){var o=new FileReader;o.onload=function(e){c.innerHTML='<img src="'+e.target.result+'"/>',n&&n(e.target.result,r)},o.readAsDataURL(e)}).catch(function(e){console.log(e),n(null)})}if(window.fetchQuery=function(){for(var e={},o=location.search.substring(1),n=o.split("&"),r=0;r<n.length;++r){var i=n[r].split("=");e[i[0]]=decodeURIComponent(i[1])}return e},window.generateByQuery=function(e,o){e.image?r(e.image,function(n){e.image=n,i(e,o)}):i(e,o)},window.$){var t=$("#qrcode"),a=$("#image-type"),c=$("#image"),l=$("#url-block"),d=$(".share-block"),s=$("#download-image"),u=t.html(),g=$("#file-block"),f=$(".droppable-zone"),p=$(".droppable-zone-text"),v=p.text();if($(document.body).bind("dragover drop",function(e){return e.preventDefault(),!1}),!window.FileReader)return void p.text("Your browser does not support.");f.bind("dragover",function(){f.addClass("hover")}),f.bind("dragleave",function(){f.removeClass("hover")});var h,m;f.bind("drop",function(e){f.removeClass("hover"),h=m=e.originalEvent.dataTransfer.files[0],$("#image-file")[0].files=e.originalEvent.dataTransfer.files,p.text(h.name),ot.autoUpdate()}),$("#image-file").bind("change",function(){h=m=this.files[0],h?p.text(h.name):p.text(v)}),window.generate=function(o){var n=a.val(),r="file"===n?h:c.val(),i=$("#size").val(),l=Object.assign({input:o,type:$("#type").val(),size:i,image:r,image_size:$("#image-size").val(),image_margin:$("#image-margin").val(),image_show_background:$("#image-show-background").prop("checked"),background_option_color:$("#background-option-color").val()},e("dot"),e("corners-square"),e("corners-dot"));generateByQuery(l,function(e,o){e?(s.attr("download","qrcode."+o).attr("href",e),s.show()):(t.html(u),s.hide())});var d=$("#share-link").val().replace("/generator/?","/?");return $("#qrcode-link").val(d),'<iframe src="'+d+'" frameborder="0" scrolling="no" width="'+i+'" height="'+i+'"></iframe>'},$(window).on("methodLoad",function(){a.change(function(){"url"===a.val()?(l.show(),g.hide(),d.show()):(l.hide(),g.show(),d.hide())}),a.change(),$(".color-input").each(function(){var e,o=$(this).find("input"),n=$(this).find(".color");n.css("background-color",o.val()),o.bind("change",function(){n.css("background-color",o.val()),e&&(e.color.setColor(o.val()),e.render())}),n.colorPicker({doRender:!1,buildCallback:function(){e=this},renderCallback:function(e,r){n.css("background-color",e._css.backgroundColor),!1===r&&(o.val(e._css.backgroundColor),o.trigger("input"))}})})})}}();